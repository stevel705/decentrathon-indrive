# –í–µ–±-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π

–≠—Ç–æ—Ç –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –ø–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –æ–±—É—á–µ–Ω–Ω–æ–π –Ω–µ–π—Ä–æ–Ω–Ω–æ–π —Å–µ—Ç–∏.

## –§—É–Ω–∫—Ü–∏–∏

- **–ê–Ω–∞–ª–∏–∑ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–ª–∏—á–∏—è –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π –∞–≤—Ç–æ–º–æ–±–∏–ª—è —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é
- **–û—Ü–µ–Ω–∫–∞ —á–∏—Å—Ç–æ—Ç—ã**: –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ 3 —É—Ä–æ–≤–Ω—è–º —á–∏—Å—Ç–æ—Ç—ã (–≥—Ä—è–∑–Ω—ã–π, —Å—Ä–µ–¥–Ω–µ–π —á–∏—Å—Ç–æ—Ç—ã, —á–∏—Å—Ç—ã–π)
- **–£–¥–æ–±–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: Drag & drop –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **–¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è**: –ó–µ–ª–µ–Ω—ã–π/–∂–µ–ª—Ç—ã–π/–∫—Ä–∞—Å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –æ—Ü–µ–Ω–∫–∏

## –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

1. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–æ–¥–µ–ª—å –æ–±—É—á–µ–Ω–∞**:
   ```bash
   # –î–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å —Ñ–∞–π–ª runs/20250913_105741/best.pt
   ls runs/*/best.pt
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä**:
   ```bash
   ./start_server.sh
   ```

3. **–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä** –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8000

## –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

–ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç `start_server.sh` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É –≤—Ä—É—á–Ω—É—é:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements_web.txt

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
python app.py
```

## API

### POST /predict
–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `file`: –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JPG, PNG –∏–ª–∏ BMP

**–û—Ç–≤–µ—Ç:**
```json
{
  "damage_probability": 0.85,
  "is_damaged": true,
  "clean_level": 1,
  "clean_probabilities": [0.1, 0.7, 0.2],
  "status": {
    "damage": {
      "text": "–ü–æ–≤—Ä–µ–∂–¥–µ–Ω",
      "color": "orange",
      "severity": "medium"
    },
    "cleanliness": {
      "text": "–°—Ä–µ–¥–Ω–µ–π —á–∏—Å—Ç–æ—Ç—ã",
      "color": "yellow",
      "level": 1
    }
  }
}
```

### GET /health
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞.

## –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–∫–ª—é—á–∞–µ—Ç:

1. **–û–±–ª–∞—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π drag & drop
2. **–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä** –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
3. **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞** —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π:
   - üü¢ –ó–µ–ª–µ–Ω—ã–π: —Ö–æ—Ä–æ—à–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
   - üü° –ñ–µ–ª—Ç—ã–π: —Å—Ä–µ–¥–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ  
   - üî¥ –ö—Ä–∞—Å–Ω—ã–π: –ø–ª–æ—Ö–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

- **Backend**: FastAPI
- **–ú–æ–¥–µ–ª—å**: ConvNeXt-tiny —Å –º—É–ª—å—Ç–∏–∑–∞–¥–∞—á–Ω—ã–º –æ–±—É—á–µ–Ω–∏–µ–º
- **Preprocessing**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è ImageNet
- **–†–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**: 384x384 –ø–∏–∫—Å–µ–ª–µ–π

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
app.py                 # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
requirements_web.txt   # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
start_server.sh       # –°–∫—Ä–∏–ø—Ç –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
runs/*/best.pt        # –û–±—É—á–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

1. **–û—à–∏–±–∫–∞ "–§–∞–π–ª –º–æ–¥–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω"**:
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–æ–¥–µ–ª—å –æ–±—É—á–µ–Ω–∞: `python train_eval.py --data-root ./data/processed`

2. **–û—à–∏–±–∫–∞ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**:
   - –û–±–Ω–æ–≤–∏—Ç–µ pip: `pip install --upgrade pip`
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

3. **–°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è**:
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç 8000 —Å–≤–æ–±–æ–¥–µ–Ω
   - –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å –¥—Ä—É–≥–∏–º –ø–æ—Ä—Ç–æ–º: `uvicorn app:app --host 0.0.0.0 --port 8001`

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### Curl
```bash
curl -X POST "http://localhost:8000/predict" \
     -H "accept: application/json" \
     -H "Content-Type: multipart/form-data" \
     -F "file=@car_image.jpg"
```

### Python
```python
import requests

with open('car_image.jpg', 'rb') as f:
    response = requests.post(
        'http://localhost:8000/predict',
        files={'file': f}
    )
    result = response.json()
    print(f"–ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è: {result['damage_probability']:.2%}")
    print(f"–ß–∏—Å—Ç–æ—Ç–∞: {result['status']['cleanliness']['text']}")
```
